"use strict";(self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[]).push([[588],{3882:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{align:"left"}},[e("el-form",{attrs:{inline:!0,model:t.queryform}},[e("el-form-item",{attrs:{label:"學年："}},[e("el-select",{attrs:{placeholder:"學年"},on:{change:t.yearChange},model:{value:t.queryform.year_id,callback:function(e){t.$set(t.queryform,"year_id",e)},expression:"queryform.year_id"}},t._l(t.yearlist,(function(t){return e("el-option",{key:t.year_id,attrs:{label:t.year_id,value:t.year_id}})})),1)],1),e("el-form-item",{attrs:{label:"學期:"}},[e("el-select",{attrs:{placeholder:"學期"},on:{change:t.smsChange},model:{value:t.queryform.sms_id,callback:function(e){t.$set(t.queryform,"sms_id",e)},expression:"queryform.sms_id"}},t._l(t.smslist,(function(t){return e("el-option",{key:t.sms_id,attrs:{label:t.sms_abr,value:t.sms_id}})})),1)],1),e("el-form-item",{attrs:{label:"學號:"}},[e("el-input",{model:{value:t.queryform.std_no,callback:function(e){t.$set(t.queryform,"std_no",e)},expression:"queryform.std_no"}})],1),e("el-form-item",{attrs:{label:"學生姓名:"}},[e("el-input",{model:{value:t.queryform.std_name,callback:function(e){t.$set(t.queryform,"std_name",e)},expression:"queryform.std_name"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查詢")])],1)],1)],1),e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"學習成果概況統計",name:"first"}},[e("LearningResult",{attrs:{userStatic:t.userStatic,tableDataPass:t.tableData,totalPass:t.total,api_interface:t.api_interface,queryform:t.queryform},on:{"get-std":t.getstd,"dbclick-row":t.dbclickrow}})],1),e("el-tab-pane",{attrs:{label:t.page2Lable,name:"second"}},[e("TeaTutorDetail",{attrs:{queryform:t.queryform,cleanlist:t.cleanlist,List:t.List}})],1)],1)],1)},r=[],i=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"70vh",stripe:"","row-style":t.rowState},on:{"row-click":t.rowClick,"row-dblclick":t.rowdblclick}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),t._l(t.render_header,(function(t){return e("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center"}})}))],2),e("el-pagination",{attrs:{"page-size":t.pageSize,total:t.total,layout:"total,prev, pager, next,sizes"},on:{"current-change":t.current_change,"size-change":t.size_change}})],1)},n=[],o=a(4876),l={props:{userStatic:{type:Object},api_interface:{type:Object},activePage:{type:String},tableDataPass:{type:Array},totalPass:{type:Number},queryform:{type:Object}},data(){return{tableData:[],data_structure:{},yearlist:[],smslist:[],clslist:[],clsParms:{year_id:"",sms_id:"",emp_id:"10615"},total:0,currentPage:1,pageSize:10}},methods:{rowdblclick:function(){this.$emit("dbclick-row","")},rowClick:function(t,e,a){this.$emit("get-std",t.std_no)},rowState(t,e){return{backgroundColor:"#f4f4f5"}},current_change(t){var e=this,a="",s="";a=(t-1)*e.pageSize+1,s=t*e.pageSize,e.currentPage=t,e.queryform.sRowNun=a,e.queryform.eRowNun=s,this.get_data()},size_change(t){var e=this,a="",s="";a=(e.currentPage-1)*t+1,s=e.currentPage*t,e.pageSize=t,e.queryform.sRowNun=a,e.queryform.eRowNun=s,this.get_data()},get_data:function(t){let e=this;const a=e.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$http({url:e.api_interface.get_data,method:"get",params:e.queryform,headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?(e.tableData=t.data.dataset,e.total=t.data.dataset[0].x_total):(e.tableData=[],e.$message.error("查無資料，請確認"))})).catch((t=>{e.tableData=[],e.$message({message:"系統發生錯誤"+t,type:"error",duration:0,showClose:!0})})).finally((()=>a.close()))},query:function(){this.get_data()}},components:{},beforeDestroy(){},mounted(){},beforeMount(){switch(this.userStatic.data_structure){case"LearningResultView":this.data_structure=o.tp;break;default:}},computed:{render_header(){let t=this.data_structure.header.filter((t=>"N"===t.hidden)).sort((function(t,e){return t.sort>e.sort?1:-1}));return t}},watch:{totalPass:function(t,e){this.total=t},tableDataPass:function(t,e){this.tableData=t}},created(){}},c=l,d=a(1001),u=(0,d.Z)(c,i,n,!1,null,null,null),m=u.exports,f=a(4097),h="",y={name:"AdmintTutorView",props:{userStatic:{type:Object},api_interface:{type:Object}},data:function(){return{activeName:"first",activePage:"0",tableData:[],data_structure:{},queryform:{year_id:"",sms_id:"",cls_id:"",std_no:"",std_name:"",emp_id:"",consult_emp:"",kind:this.userStatic.interface,sRowNun:1,eRowNun:10,token:this.$token},yearlist:[],smslist:[],clslist:[],cleanlist:[1,2,3],clsParms:{year_id:"",sms_id:"",emp_id:"10615"},total:0,currentPage:1,pageSize:10,page2Lable:"學習成果概況明細",List:[{diverseid:"學習成果-上傳課程學習成果",width:"",prop:"",col:"stuattestation",parameter:"N",hidden:"N",sort:11,defult:"",slot:!1},{diverseid:"學習成果-學習成果認證",width:"",prop:"",col:"stuattestationconfirm",parameter:"N",hidden:"N",sort:12,defult:"",slot:!1},{diverseid:"學習成果-勾選課程學習成果",width:"",prop:"",col:"stuattestationcentraldb",parameter:"N",hidden:"N",sort:13,defult:"",slot:!1}]}},components:{LearningResult:m,TeaTutorDetail:f.Z},methods:{getstd:function(t){this.queryform.std_no=t,this.page2Lable=`學習成果及多元表現概況明細(學號：${t})`},yearChange:function(t){this.clsParms.year_id=t},smsChange:function(t){this.clsParms.sms_id=t},query:function(){this.get_data()},get_data:function(){let t=this;const e=t.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});h=t.api_interface.get_data,t.$http({url:h,method:"get",params:t.queryform,headers:{SkyGet:t.$token}}).then((e=>{"Y"==e.data.status?(t.tableData=e.data.dataset,t.total=e.data.dataset[0].x_total):(t.tableData=[],t.$message.error("查無資料，請確認"))})).catch((e=>{t.tableData=[],t.$message({message:"系統發生錯誤"+e,type:"error",duration:0,showClose:!0})})).finally((()=>e.close()))},handleClick:function(t,e){this.activePage=t.index},dbclickrow:function(){this.cleanlist=[],this.activeName="second"},getyearlist:function(){let t=this;const e=`${t.$apiroot}/s90yearinfo`;return new Promise((function(a,s){t.$http({url:e,method:"get",headers:{SkyGet:t.$token}}).then((e=>{"Y"==e.data.status?(t.yearlist=e.data.dataset,t.queryform.year_id=e.data.dataset[0].year_id.toString(),t.clsParms.year_id=e.data.dataset[0].year_id.toString()):(t.queryform.year_id="",t.yearlist=[]),a("Y")})).catch((e=>{t.$message.error("呼叫後端【s90yearinfo】發生錯誤,"+e),s("N")})).finally()}))},getsmslist:function(){let t=this;const e=`${t.$apiroot}/s90smsinfo`;return new Promise((function(a,s){t.$http({url:e,method:"get",headers:{SkyGet:t.$token}}).then((e=>{"Y"==e.data.status?(t.smslist=e.data.dataset,t.queryform.sms_id=e.data.dataset[0].sms_id.toString(),t.clsParms.sms_id=e.data.dataset[0].sms_id.toString()):(t.queryform.sms_id="",t.smslist=[]),a("Y")})).catch((e=>{t.$message.error("呼叫後端【s90smsinfo】發生錯誤,"+e),s("N")})).finally()}))},getclslist:function(t){let e=this;const a=`${e.$apiroot}/TeaAttestation/clslist`;return new Promise((function(s,r){e.$http({url:a,method:"get",params:t,headers:{SkyGet:e.$token}}).then((t=>{e.clslist=[],e.queryform.cls="","Y"==t.data.status?(e.clslist=t.data.dataset,e.queryform.cls_id=t.data.dataset[0].cls_id.toString()):(e.queryform.cls_id="",e.clslist=[]),s("Y")})).catch((t=>{e.$message.error("呼叫後端【S04_stucls】發生錯誤,"+t),r("N")})).finally()}))},asyncRun:async function(){await this.getyearlist(),await this.getsmslist()}},mounted:function(){},beforeDestroy(){},mounted(){this.asyncRun()}},p=y,g=(0,d.Z)(p,s,r,!1,null,null,null),_=g.exports}}]);