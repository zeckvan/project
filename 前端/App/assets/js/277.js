"use strict";(self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[]).push([[277],{2301:function(e,t,a){a.d(t,{Z:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"學生諮詢課程填寫",visible:e.dialogFormVisible,fullscreen:!1,width:"100%","close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[t("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"學年：",prop:"year_id"}},[t("datalistyear",{staticStyle:{width:"50%","margin-right":"100%"},attrs:{year_id:e.form.year_id,placeholder:"",disabled:"1"===e.form.is_sys||"edit"===e.edit_model},on:{"get-year":e.getyear}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{staticStyle:{width:"50%","margin-right":"100%"},attrs:{label:"學期：",prop:"sms_id",placeholder:""}},[t("datalistsms",{attrs:{sms_type:e.sms_type,sms_id:e.form.sms_id,disabled:"1"===e.form.is_sys||"edit"===e.edit_model},on:{"get-sms":e.getsms}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"諮詢日期：",prop:"consult_date"}},[t("el-date-picker",{staticStyle:{width:"75%","margin-right":"100%"},attrs:{clearable:!0,type:"date",format:"yyyy 年 MM 月 dd 日",editable:!1,"value-format":"yyyyMMdd",readonly:e.is_readonly},model:{value:e.form.consult_date,callback:function(t){e.$set(e.form,"consult_date",t)},expression:"form.consult_date"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"諮詢地點：",prop:"consult_area"}},[t("el-input",{staticStyle:{width:"75%","margin-right":"100%"},attrs:{readonly:"1"===e.form.is_sys||"edit"===e.edit_model},model:{value:e.form.consult_area,callback:function(t){e.$set(e.form,"consult_area",t)},expression:"form.consult_area"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"諮詢方式：",prop:"consult_type"}},[t("el-select",{staticStyle:{width:"75%","margin-right":"100%"},attrs:{placeholder:"",disabled:"1"===e.form.is_sys},model:{value:e.form.consult_type,callback:function(t){e.$set(e.form,"consult_type",t)},expression:"form.consult_type"}},e._l(e.consultid,(function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id,disabled:"1"===e.form.is_sys}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"諮詢主題：",prop:"consult_subject"}},[t("el-input",{staticStyle:{width:"75%","margin-right":"100%"},attrs:{placeholder:"",readonly:"1"===e.form.is_sys||"edit"===e.edit_model},model:{value:e.form.consult_subject,callback:function(t){e.$set(e.form,"consult_subject",t)},expression:"form.consult_subject"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"諮詢內容：",prop:"consult_content"}},[t("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.consult_content,callback:function(t){e.$set(e.form,"consult_content",t)},expression:"form.consult_content"}})],1)],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("存檔")]),t("el-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)],1)},r=[],o=a(4070),d=a(2835),s={props:{dialog_show:{type:Boolean},edit_model:{tyep:String},data_structure:{type:Object},parameter:{type:Object},userStatic:{type:Object},api_interface:{type:Object}},data(){return{sms_type:"1",form:{year_id:"",sms_id:"",emp_id:"",consult_date:"",consult_area:"",consult_type:"",consult_subject:"",consult_content:"",is_sys:"",token:""},studata:[],rules:{year_id:[{required:!0,message:"請輸入學年",trigger:"change"}],sms_id:[{required:!0,message:"請輸入學期",trigger:"change"}],consult_date:[{required:!0,message:"請輸入諮詢日期",trigger:"change"}],consult_area:[{required:!0,message:"請輸入諮詢地點",trigger:"change"}],consult_type:[{required:!0,message:"請輸入諮詢方式",trigger:"change"}],consult_subject:[{required:!0,message:"請輸入諮詢主題",trigger:"change"}],consult_content:[{required:!0,message:"請輸入諮詢內容",trigger:"change"}]},dialogFormVisible:this.dialog_show,consultid:[{id:"1",name:"團體諮詢"},{id:"2",name:"個別諮詢"}],is_readonly:!1,method_type:"post",dialog_show2:!0,isShow2:!1,total:0,currentPage:1,pageSize:10}},methods:{rowState(e,t){return{backgroundColor:"#f4f4f5"}},add:function(){},del_data:function(){},headerclick(e,t){"全選"==e.label?(e.label="全不選",this.studata.forEach(((e,t)=>{0!=e.x_status&&""!=e.x_status||(e.x_status=!0)}))):(e.label="全選",this.studata.forEach(((e,t)=>{1!=e.x_status&&""!=e.x_status||(e.x_status=!1)})))},cancel:function(){this.dialogFormVisible=!1},save:function(){let e=this,t=new FormData;e.form.emp_id="",this.data_structure.header.forEach((function(a,l,r){t.append(a.col,e.form[a.col])})),t.append("token",e.$token),e.$refs["ruleForm"].validate((a=>{if(!a)return!1;{const a=e.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),l=e.api_interface.save_form;e.$http({url:l,method:e.method_type,data:t,headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?e.$message.success("存檔成功!!"):e.$message.error(t.data.message)})).catch((t=>{e.$message({message:"存檔失敗:"+t,type:"error",duration:0,showClose:!0})})).finally((()=>a.close())),this.dialogFormVisible=!1}}))},close:function(){this.$emit("get-show",!1)},getyear:function(e){this.form.year_id=e},getsms:function(e){this.form.sms_id=e},getshow2:function(e){this.isShow2=e.show},current_change(e){var t=this,a="",l="";a=(e-1)*t.pageSize+1,l=e*t.pageSize,t.currentPage=e,apiurl=t.api_interface.get_data,this.get_data(apiurl,t.year,t.sms,a,l)},size_change(e){var t=this,a="",l="";a=(t.currentPage-1)*e+1,l=t.currentPage*e,t.pageSize=e,apiurl=t.api_interface.get_data,this.get_data(apiurl,t.year,t.sms,a,l)},get_data:function(e,t,a,l,r){let o=this;const d=o.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});o.parameter.std_no="",o.parameter.year_id=t,o.parameter.sms_id=a,o.parameter.sRowNun=l,o.parameter.eRowNun=r,o.parameter.sch_no="",o.$http({url:e,method:"get",params:o.parameter,headers:{SkyGet:o.$token}}).then((e=>{"Y"==e.data.status?(o.tableData=e.data.dataset,o.total=e.data.total):(o.tableData=[],o.$message.error("查無資料，請確認"))})).catch((e=>{console.log(e),o.tableData=[],o.$message({message:"系統發生錯誤"+e,type:"error",duration:0,showClose:!0})})).finally((()=>d.close()))}},mounted(){let e=this;if("add"===this.edit_model)this.is_readonly=!1,this.method_type="post",this.data_structure.header.forEach((function(t,a,l){e.form[t.col]=""})),this.form.is_sys="2";else{const t=e.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=e.api_interface.get_form;e.$http({url:a,method:"get",params:this.parameter,headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?(this.data_structure.header.forEach((function(a,l,r){t.data.dataset[0][a.col]&&("year_id"==a.col||"sms_id"==a.col?e.form[a.col]=t.data.dataset[0][a.col].toString():"consult_date"==a.col?e.form[a.col]="undefined"==t.data.dataset[0][a.col]?"":t.data.dataset[0][a.col]:e.form[a.col]=t.data.dataset[0][a.col])})),e.is_readonly="1"===t.data.dataset[0].is_sys):e.$message.error("查無資料，請確認")})).catch((t=>{e.$message({message:"系統發生錯誤"+t,type:"error",duration:0,showClose:!0})})).finally((()=>t.close())),this.method_type="put"}},components:{datalistyear:o.Z,datalistsms:d.Z},computed:{}},i=s,n=a(1001),p=(0,n.Z)(i,l,r,!1,null,null,null),c=p.exports},4876:function(e,t,a){a.d(t,{Af:function(){return d},H_:function(){return l},Kk:function(){return r},ib:function(){return o},kq:function(){return n},qA:function(){return i},tp:function(){return s}});const l={header:[{label:"學校代碼",width:"",prop:"a",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:""},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:""},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:""},{label:"教師",width:"",prop:"d",col:"emp_id",parameter:"Y",hidden:"Y",sort:0,defult:""},{label:"序號",width:"",prop:"e",col:"ser_id",parameter:"Y",hidden:"Y",sort:0,defult:""},{label:"諮詢日期",width:"",prop:"f",col:"consult_date",parameter:"N",hidden:"N",sort:3,defult:""},{label:"諮詢地點",width:"",prop:"g",col:"consult_area",parameter:"Y",hidden:"N",sort:4,defult:""},{label:"諮詢方式",width:"",prop:"h",col:"consult_type",parameter:"N",hidden:"N",sort:5,defult:""},{label:"諮詢主題",width:"",prop:"i",col:"consult_subject",parameter:"N",hidden:"N",sort:6,defult:""},{label:"諮詢內容",width:"",prop:"j",col:"consult_content",parameter:"Y",hidden:"Y",sort:0,defult:""},{label:"資料來源",width:"",prop:"k",col:"is_sys",parameter:"N",hidden:"Y",sort:0,defult:""}],sub_header:[{label:"班級",width:"",prop:"a",col:"cls_name",parameter:"N",hidden:"N",sort:1,defult:""},{label:"學號",width:"",prop:"b",col:"stu_no",parameter:"Y",hidden:"N",sort:2,defult:""},{label:"姓名",width:"",prop:"c",col:"stu_name",parameter:"N",hidden:"N",sort:3,defult:""}],delete_rule:{},save_rule:{}},r={header:[{label:"學校代碼",width:"",prop:"a",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"d",col:"cls_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"科目代碼",width:"",prop:"e",col:"sub_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"分組",width:"",prop:"f",col:"src_dup",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"教師代碼",width:"",prop:"g",col:"emp_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學號",width:"",prop:"h",col:"std_no",parameter:"Y",hidden:"N",sort:5,defult:"",slot:!1},{label:"序號",width:"",prop:"i",col:"ser_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學分數",width:"",prop:"j",col:"credit",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"修習方式",width:"",prop:"t",col:"scr_study",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"送出認証",width:"",prop:"l",col:"attestation_send",parameter:"y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"認証日期",width:"",prop:"m",col:"attestation_date",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1},{label:"認証狀態",width:"",prop:"n",col:"attestation_status",parameter:"N",hidden:"N",sort:8,defult:"",slot:!0},{label:"資料來源",width:"",prop:"o",col:"is_sys",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"備註",width:"",prop:"p",col:"content",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"科目名稱",width:"",prop:"q",col:"sub_name",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"教師名稱",width:"",prop:"r",col:"emp_name",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"檔案名稱",width:"",prop:"s",col:"file_name",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"上課班級",width:"",prop:"as_cls_name",col:"cls_name",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學生",width:"",prop:"as_name",col:"std_name",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"發佈狀態",width:"",prop:"v",col:"attestation_release",parameter:"N",hidden:"N",sort:9,defult:"",slot:!0},{label:"未通過原因",width:"",prop:"w",col:"attestation_reason",parameter:"N",hidden:"N",sort:10,defult:"",slot:!0}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},o={header:[{label:"學校代碼",width:"",prop:"a",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",slot:!1},{label:"科目名稱",width:"",prop:"as_subj_name",col:"as_subj_name",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"上課班級",width:"",prop:"as_cls_name",col:"as_cls_name",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"學生學號",width:"",prop:"as_std_no",col:"as_std_no",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"學生姓名",width:"",prop:"as_name",col:"as_name",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"已上傳數量",width:"",prop:"x_fileupload",col:"x_fileupload",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1},{label:"已認証通過",width:"",prop:"x_pass",col:"x_pass",parameter:"N",hidden:"N",sort:8,defult:"",slot:!0},{label:"尚未認証數",width:"",prop:"x_notyet",col:"x_notyet",parameter:"N",hidden:"N",sort:9,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},d={header:[{label:"學校代碼",width:"",prop:"sch_no",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"as_cls_name",col:"cls_id",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"as_std_no",col:"std_no",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"as_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"學習成果紀錄",width:"",prop:"x_1",col:"x_1",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"學習成果認證",width:"",prop:"x_2",col:"x_2",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1},{label:"學習成果勾選",width:"",prop:"x_3",col:"x_3",parameter:"N",hidden:"N",sort:8,defult:"",slot:!0},{label:"多元表現紀錄",width:"",prop:"x_4",col:"x_4",parameter:"N",hidden:"N",sort:9,defult:"",slot:!1},{label:"多元表現勾選",width:"",prop:"x_5",col:"x_5",parameter:"N",hidden:"N",sort:10,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},s={header:[{label:"學校代碼",width:"",prop:"sch_no",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"std_no",col:"std_no",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"std_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"學習成果勾選數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},i={header:[{label:"學校代碼",width:"",prop:"sch_no",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"std_no",col:"std_no",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"std_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"多元學習勾選數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},n={LeftHeader:[{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"教師姓名",width:"",prop:"emp_name",col:"emp_name",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"教師代碼",width:"",prop:"emp_id",col:"emp_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"未認證數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1}],RightHeader:[{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"std_no",col:"std_no",parameter:"Y",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"std_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"科目",width:"",prop:"sub_name",col:"sub_name",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"待認證數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0}}}]);