"use strict";(self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[]).push([[26],{1026:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"一年級",name:"first"}},[t("OperateGrade",{attrs:{userStatic:e.userStatic,api_interface:e.api_interface,tableData:e.ParentData}})],1),t("el-tab-pane",{attrs:{label:"二年級",name:"second"}},[t("OperateGrade",{attrs:{userStatic:e.userStatic,api_interface:e.api_interface,tableData:e.ParentData}})],1),t("el-tab-pane",{attrs:{label:"三年級",name:"third"}},[t("OperateGrade",{attrs:{userStatic:e.userStatic,api_interface:e.api_interface,tableData:e.ParentData}})],1)],1)],1)},l=[],d=a(4070),i=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{attrs:{data:e.tableData,height:"72vh",stripe:"",tyle:"width:100%;","row-style":e.rowState,"header-cell-style":e.headercellstyle,"cell-style":e.cellstyle,border:""}},[t("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._l(e.render_header,(function(a){return t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,width:a.width,align:a.align},scopedSlots:e._u([{key:"default",fn:function(r){return[a.slot?t("div",["input"==a.type?t("div",[t("el-input",{model:{value:r.row[a.prop],callback:function(t){e.$set(r.row,a.prop,t)},expression:"scope.row[item.prop]"}})],1):"select"==a.type?t("div",[t("el-select",{staticStyle:{width:"350px"},attrs:{disabled:"",placeholder:""},model:{value:r.row[a.prop],callback:function(t){e.$set(r.row,a.prop,t)},expression:"scope.row[item.prop]"}},e._l(e.typeList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):"date"==a.type?t("div",[t("el-date-picker",{staticStyle:{width:"350px"},attrs:{clearable:!1,editable:!1,type:"datetime",placeholder:"選擇日期時間","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:r.row[a.prop],callback:function(t){e.$set(r.row,a.prop,t)},expression:"scope.row[item.prop]"}})],1):e._e()]):t("div",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(r.row[a.prop])+" ")])]}}],null,!0)})}))],2),t("br"),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("存檔")])],1)},n=[],o=a(2726),s="",p={props:{userStatic:{type:Object},api_interface:{type:Object},tableData:{type:Array}},data(){return{data_structure:{},total:0,currentPage:1,pageSize:10,show_page:!0,getempid:"",getAddStatus:new Date,typeList:[{id:"01",name:" 學生上傳及送出學習成果認證時間"},{id:"02",name:"老師認證學生學習成果時間"},{id:"03",name:"學生勾選學習成果時間"},{id:"04",name:"學生勾選多元表現時間"}]}},methods:{save:function(){let e=this,t=new FormData;e.tableData.forEach((function(e,a,r){t.append("year_id[]",Number(e.year_id)),t.append("sms_id[]",Number(e.sms_id)),t.append("grade_id[]",e.grade_id),t.append("type_id[]",e.type_id),t.append("startdate[]",e.startdate.replaceAll("-","").replaceAll(":","").replaceAll(" ","")),t.append("enddate[]",e.enddate.replaceAll("-","").replaceAll(":","").replaceAll(" ",""))})),t.append("token",e.$token);const a=e.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s=e.api_interface.save_data,e.$http({url:s,method:"put",data:t,headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?e.$message.success("存檔成功!!"):e.$message.error(t.data.message)})).catch((t=>{e.$message({message:"系統發生錯誤"+t,type:"error",duration:0,showClose:!0})})).finally((()=>a.close()))},headercellstyle:function(e,t,a,r){return{"text-align":"center","border-left":" 3px solid #EBEEF5","border-bottom":" 3px solid #EBEEF5","border-top":" 3px solid #EBEEF5"}},cellstyle:function(e,t,a,r){return{"border-left":" 3px solid #EBEEF5","border-bottom":" 3px solid #EBEEF5"}},rowdblclick:function(){},rowState:function(){},getempdata:function(e){this.getempid=e.row.emp_id},getinsertStatus:function(e){this.getAddStatus=new Date},current_change:function(){},current_change_std:function(){},size_change:function(){},size_change_std:function(){},get_data:function(){let e=this;const t=e.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s=e.api_interface.get_data,e.$http({url:s,method:"get",headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?e.tableData=t.data.dataset:(e.studata=[],e.$tableData.error("查無資料，請確認"))})).catch((t=>{e.tableData=[],e.$message({message:"系統發生錯誤"+t,type:"error",duration:0,showClose:!0})})).finally((()=>t.close()))}},components:{},beforeDestroy(){},mounted(){},beforeMount(){switch(this.userStatic.data_structure){case"OperateSetUp":this.data_structure=o.Q_;break;default:}},computed:{render_header(){let e=this.data_structure.header.filter((e=>"N"===e.hidden)).sort((function(e,t){return e.sort>t.sort?1:-1}));return e}}},c=p,u=a(1001),h=(0,u.Z)(c,i,n,!1,null,null,null),m=h.exports,f="",_={name:"TeaConsultView",props:{userStatic:{type:Object},api_interface:{type:Object}},data:function(){return{activeName:"first",tempData:[],ParentData:[],formInline:{year:"111",sms:"1",type:""},smslist:[{id:"0",name:"0"},{id:"1",name:"1"},{id:"2",name:"2"}],year_id:"",sms_id:"0"}},components:{OperateGrade:m,datalistyear:d.Z},methods:{query:function(){},getyear:function(e){},handleClick:function(e){this.get_data(Number(e.index)+1)},get_data:function(e){let t=this;const a=t.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});f=t.api_interface.get_data,t.$http({url:f,method:"get",headers:{SkyGet:t.$token}}).then((a=>{"Y"==a.data.status?(t.tempData=a.data.dataset,t.ParentData=a.data.dataset.filter((function(t,a,r){return t.grade_id==e}))):(t.ParentData=[],t.$message.error("查無資料，請確認"))})).catch((e=>{t.ParentData=[],t.$message({message:"系統發生錯誤"+e,type:"error",duration:0,showClose:!0})})).finally((()=>a.close()))}},mounted:function(){this.get_data("1")}},b=_,y=(0,u.Z)(b,r,l,!1,null,null,null),g=y.exports},2726:function(e,t,a){a.d(t,{Ac:function(){return r},Q_:function(){return d},vK:function(){return l}});const r={tea_hedaer:[{label:"教師員編",width:"",prop:"emp_id",col:"emp_id",parameter:"Y",hidden:"N",sort:1,defult:""},{label:"教師姓名",width:"",prop:"emp_name",col:"emp_name",parameter:"N",hidden:"N",sort:2,defult:""},{label:"教郵e-mail",width:"",prop:"emp_email",col:"emp_email",parameter:"N",hidden:"N",sort:3,defult:""}],cls_header:[{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:""},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:""},{label:"班級名稱",width:"110",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:""},{label:"班級代碼",width:"",prop:"cls_code",col:"cls_code",parameter:"N",hidden:"Y",sort:4,defult:""},{label:"",width:"",prop:"deg_id",col:"deg_id",parameter:"N",hidden:"Y",sort:0,defult:""},{label:"",width:"",prop:"dep_id",col:"dep_id",parameter:"N",hidden:"Y",sort:0,defult:""},{label:"",width:"",prop:"bra_id",col:"bra_id",parameter:"N",hidden:"Y",sort:0,defult:""},{label:"",width:"",prop:"grd_id",col:"grd_id",parameter:"N",hidden:"Y",sort:0,defult:""},{label:"",width:"",prop:"cls_id",col:"cls_id",parameter:"N",hidden:"Y",sort:0,defult:""}],consult_header:[{label:"學年",width:"",prop:"a",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:""},{label:"學期",width:"",prop:"b",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:""},{label:"班級名稱",width:"",prop:"c",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:""},{label:"班級代碼",width:"",prop:"d",col:"cls_id",parameter:"Y",hidden:"Y",sort:4,defult:""}],delete_rule:{},save_rule:{}},l={header:[{label:"項目",width:"",prop:"name",col:"name",parameter:"Y",hidden:"N",sort:2,defult:"",align:"left",slot:!1,type:"default",index:"N"},{label:"數量",width:"",prop:"value",col:"value",parameter:"Y",hidden:"N",sort:3,defult:"",align:"center",slot:!0,type:"input",index:"N"},{label:"單位",width:"",prop:"unit",col:"unit",parameter:"Y",hidden:"N",sort:4,defult:"",align:"center",slot:!0,type:"input",index:"N"},{label:"說明",width:"",prop:"memo",col:"memo",parameter:"Y",hidden:"N",sort:5,defult:"",align:"center",slot:!0,type:"input",index:"N"}],delete_rule:{},save_rule:{}},d={header:[{label:"學年",width:"100",prop:"year_id",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",align:"left",slot:!1,type:"input",index:"N"},{label:"學期",width:"100",prop:"sms_id",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",align:"center",slot:!1,type:"input",index:"N"},{label:"項目",width:"",prop:"type_id",col:"type_id",parameter:"Y",hidden:"N",sort:3,defult:"",align:"center",slot:!0,type:"select",index:"N"},{label:"開放日期",width:"",prop:"startdate",col:"startdate",parameter:"Y",hidden:"N",sort:4,defult:"",align:"center",slot:!0,type:"date",index:"N"},{label:"結束日期",width:"",prop:"enddate",col:"enddate",parameter:"Y",hidden:"N",sort:5,defult:"",align:"center",slot:!0,type:"date",index:"N"}],delete_rule:{},save_rule:{}}}}]);