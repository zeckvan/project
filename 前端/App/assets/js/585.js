"use strict";(self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[]).push([[585],{585:function(e,t,l){l.r(t),l.d(t,{default:function(){return N}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-container",[t("el-header",[t("div",{attrs:{align:"left"}},[t("el-form",{attrs:{inline:!0,model:e.queryform}},[t("el-form-item",{attrs:{label:"學年："}},[t("el-select",{attrs:{placeholder:"學年"},on:{change:e.yearChange},model:{value:e.queryform.year_id,callback:function(t){e.$set(e.queryform,"year_id",t)},expression:"queryform.year_id"}},e._l(e.yearlist,(function(e){return t("el-option",{key:e.year_id,attrs:{label:e.year_id,value:e.year_id}})})),1)],1),t("el-form-item",{attrs:{label:"學期:"}},[t("el-select",{attrs:{placeholder:"學期"},on:{change:e.smsChange},model:{value:e.queryform.sms_id,callback:function(t){e.$set(e.queryform,"sms_id",t)},expression:"queryform.sms_id"}},e._l(e.smslist,(function(e){return t("el-option",{key:e.sms_id,attrs:{label:e.sms_abr,value:e.sms_id}})})),1)],1),t("el-form-item",{attrs:{label:"班級:"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.queryform.cls_id,callback:function(t){e.$set(e.queryform,"cls_id",t)},expression:"queryform.cls_id"}},e._l(e.clslist,(function(e){return t("el-option",{key:e.cls_id,attrs:{label:e.cls_abr,value:e.cls_id}})})),1)],1),t("el-form-item",{attrs:{label:"學號:"}},[t("el-input",{model:{value:e.queryform.std_no,callback:function(t){e.$set(e.queryform,"std_no",t)},expression:"queryform.std_no"}})],1),t("el-form-item",{attrs:{label:"學生姓名:"}},[t("el-input",{model:{value:e.queryform.std_name,callback:function(t){e.$set(e.queryform,"std_name",t)},expression:"queryform.std_name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查詢")])],1)],1)],1)]),t("br"),t("br"),t("el-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","row-style":e.rowState}},[t("el-table-column",{attrs:{type:"index",width:"50"}}),e._l(e.render_header,(function(e){return t("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,align:"center"}})}))],2),t("el-pagination",{attrs:{"page-size":e.pageSize,total:e.total,layout:"total,prev, pager, next,sizes"},on:{"current-change":e.current_change,"size-change":e.size_change}})],1)],1)],1)},r=[],s=l(4070),o=l(2835),d=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{attrs:{placeholder:"",disabled:e.disabled},on:{change:e.change,focus:e.focus},model:{value:e.cls,callback:function(t){e.cls=t},expression:"cls"}},e._l(e.clslist,(function(e){return t("el-option",{key:e.cls_id,attrs:{label:e.cls_abr,value:e.cls_id}})})),1)],1)},i=[],n={name:"stu_cls",props:{cls_abr:{type:String},cls_id:{type:String},disabled:{type:Boolean},isShowShort:{type:Boolean}},data(){return{cls:"",clslist:[]}},computed:{},methods:{focus:function(){},change:function(e){this.$emit("get-cls",e.toString())},getData:function(){const e=`${_self.$apiroot}/S04_stucls`;_self.$http({url:e,method:"get",params:obj,headers:{SkyGet:_self.$token}}).then((e=>{_self.clslist=[],_self.cls="","Y"==e.data.status?(_self.cls=""===this.cls_id?e.data.dataset[0].cls_id.toString():this.cls_id,this.$emit("get-cls",_self.cls)):this.$emit("get-cls",_self.cls)})).catch((e=>{_self.$message.error("呼叫後端【S04_stucls】發生錯誤,"+e)})).finally()}},mounted(){this.getData()}},p=n,c=l(1001),u=(0,c.Z)(p,d,i,!1,null,null,null),h=u.exports,_=l(4876),m={props:{userStatic:{type:Object},api_interface:{type:Object},activePage:{type:String}},data(){return{tableData:[],data_structure:{},queryform:{year_id:"",sms_id:"",cls_id:"",std_no:"",std_name:"",emp_id:"",sRowNun:1,eRowNun:10,token:this.$token},yearlist:[],smslist:[],clslist:[],clsParms:{year_id:"",sms_id:"",emp_id:"",token:this.$token},total:0,currentPage:1,pageSize:10}},methods:{yearChange:function(e){this.clsParms.year_id=e,this.getclslist(this.clsParms)},smsChange:function(e){this.clsParms.sms_id=e,this.getclslist(this.clsParms)},rowState(e,t){return{backgroundColor:"#f4f4f5"}},current_change(e){var t=this,l="",a="";l=(e-1)*t.pageSize+1,a=e*t.pageSize,t.currentPage=e,t.queryform.sRowNun=l,t.queryform.eRowNun=a,this.get_data()},size_change(e){var t=this,l="",a="";l=(t.currentPage-1)*e+1,a=t.currentPage*e,t.pageSize=e,t.queryform.sRowNun=l,t.queryform.eRowNun=a,this.get_data()},get_data:function(e){let t=this;const l=t.$loading({lock:!0,text:"資料讀取中，請稍後。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});""==t.queryform.std_name&&""==t.queryform.std_no||(t.queryform.sRowNun=1,t.queryform.eRowNun=10,t.currentPage=1,t.pageSize=10),t.$http({url:t.api_interface.get_attestationResult,method:"get",params:t.queryform,headers:{SkyGet:t.$token}}).then((e=>{"Y"==e.data.status?(console.log(e.data),t.tableData=e.data.dataset,t.total=e.data.dataset[0].x_total):(t.tableData=[],t.$message.error("查無資料，請確認"))})).catch((e=>{console.log(e),t.tableData=[],t.$message({message:"系統發生錯誤"+e,type:"error",duration:0,showClose:!0})})).finally((()=>l.close()))},query:function(){this.get_data()},getyearlist:function(){let e=this;const t=`${e.$apiroot}/s90yearinfo`;return new Promise((function(l,a){e.$http({url:t,method:"get",headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?(e.yearlist=t.data.dataset,e.queryform.year_id=t.data.dataset[0].year_id.toString(),e.clsParms.year_id=t.data.dataset[0].year_id.toString()):(e.queryform.year_id="",e.yearlist=[]),l("Y")})).catch((t=>{e.$message.error("呼叫後端【s90yearinfo】發生錯誤,"+t),a("N1")})).finally()}))},getsmslist:function(){let e=this;const t=`${e.$apiroot}/s90smsinfo`;return new Promise((function(l,a){e.$http({url:t,method:"get",headers:{SkyGet:e.$token}}).then((t=>{"Y"==t.data.status?(e.smslist=t.data.dataset,e.queryform.sms_id=t.data.dataset[0].sms_id.toString(),e.clsParms.sms_id=t.data.dataset[0].sms_id.toString()):(e.queryform.sms_id="",e.smslist=[]),l("Y")})).catch((t=>{e.$message.error("呼叫後端【s90smsinfo】發生錯誤,"+t),a("N2")})).finally()}))},getclslist:function(e){let t=this;const l=`${t.$apiroot}/TeaAttestation/clslist`;return new Promise((function(a,r){t.$http({url:l,method:"get",params:e,headers:{SkyGet:t.$token}}).then((e=>{t.clslist=[],t.queryform.cls="","Y"==e.data.status?(t.clslist=e.data.dataset,t.queryform.cls_id=e.data.dataset[0].cls_id.toString()):(t.queryform.cls_id="",t.clslist=[]),a("Y")})).catch((e=>{t.$message.error("呼叫後端【S04_stucls】發生錯誤,"+e),r("N3")})).finally()}))},asyncRun:async function(){await this.getyearlist(),await this.getsmslist(),await this.getclslist(this.clsParms)}},components:{tea_attestation_query:N,datalistyear:s.Z,datalistsms:o.Z,datalistcls:h},beforeDestroy(){},mounted(){this.asyncRun()},beforeMount(){switch(this.userStatic.data_structure){case"tea_attestation_query":this.data_structure=_.ib;break;default:}},computed:{render_header(){let e=this.data_structure.header.filter((e=>"N"===e.hidden)).sort((function(e,t){return e.sort>t.sort?1:-1}));return e}},watch:{},created(){}},f=m,b=(0,c.Z)(f,a,r,!1,null,null,null),N=b.exports},4876:function(e,t,l){l.d(t,{Af:function(){return o},H_:function(){return a},Kk:function(){return r},ib:function(){return s},kq:function(){return n},qA:function(){return i},tp:function(){return d}});const a={header:[{label:"學校代碼",width:"",prop:"a",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:""},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:""},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:""},{label:"教師",width:"",prop:"d",col:"emp_id",parameter:"Y",hidden:"Y",sort:0,defult:""},{label:"序號",width:"",prop:"e",col:"ser_id",parameter:"Y",hidden:"Y",sort:0,defult:""},{label:"諮詢日期",width:"",prop:"f",col:"consult_date",parameter:"N",hidden:"N",sort:3,defult:""},{label:"諮詢地點",width:"",prop:"g",col:"consult_area",parameter:"Y",hidden:"N",sort:4,defult:""},{label:"諮詢方式",width:"",prop:"h",col:"consult_type",parameter:"N",hidden:"N",sort:5,defult:""},{label:"諮詢主題",width:"",prop:"i",col:"consult_subject",parameter:"N",hidden:"N",sort:6,defult:""},{label:"諮詢內容",width:"",prop:"j",col:"consult_content",parameter:"Y",hidden:"Y",sort:0,defult:""},{label:"資料來源",width:"",prop:"k",col:"is_sys",parameter:"N",hidden:"Y",sort:0,defult:""}],sub_header:[{label:"班級",width:"",prop:"a",col:"cls_name",parameter:"N",hidden:"N",sort:1,defult:""},{label:"學號",width:"",prop:"b",col:"stu_no",parameter:"Y",hidden:"N",sort:2,defult:""},{label:"姓名",width:"",prop:"c",col:"stu_name",parameter:"N",hidden:"N",sort:3,defult:""}],delete_rule:{},save_rule:{}},r={header:[{label:"學校代碼",width:"",prop:"a",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"d",col:"cls_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"科目代碼",width:"",prop:"e",col:"sub_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"分組",width:"",prop:"f",col:"src_dup",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"教師代碼",width:"",prop:"g",col:"emp_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學號",width:"",prop:"h",col:"std_no",parameter:"Y",hidden:"N",sort:5,defult:"",slot:!1},{label:"序號",width:"",prop:"i",col:"ser_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學分數",width:"",prop:"j",col:"credit",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"修習方式",width:"",prop:"t",col:"scr_study",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"送出認証",width:"",prop:"l",col:"attestation_send",parameter:"y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"認証日期",width:"",prop:"m",col:"attestation_date",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1},{label:"認証狀態",width:"",prop:"n",col:"attestation_status",parameter:"N",hidden:"N",sort:8,defult:"",slot:!0},{label:"資料來源",width:"",prop:"o",col:"is_sys",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"備註",width:"",prop:"p",col:"content",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"科目名稱",width:"",prop:"q",col:"sub_name",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"教師名稱",width:"",prop:"r",col:"emp_name",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"檔案名稱",width:"",prop:"s",col:"file_name",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"上課班級",width:"",prop:"as_cls_name",col:"cls_name",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學生",width:"",prop:"as_name",col:"std_name",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"發佈狀態",width:"",prop:"v",col:"attestation_release",parameter:"N",hidden:"N",sort:9,defult:"",slot:!0},{label:"未通過原因",width:"",prop:"w",col:"attestation_reason",parameter:"N",hidden:"N",sort:10,defult:"",slot:!0}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},s={header:[{label:"學校代碼",width:"",prop:"a",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",slot:!1},{label:"科目名稱",width:"",prop:"as_subj_name",col:"as_subj_name",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"上課班級",width:"",prop:"as_cls_name",col:"as_cls_name",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"學生學號",width:"",prop:"as_std_no",col:"as_std_no",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"學生姓名",width:"",prop:"as_name",col:"as_name",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"已上傳數量",width:"",prop:"x_fileupload",col:"x_fileupload",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1},{label:"已認証通過",width:"",prop:"x_pass",col:"x_pass",parameter:"N",hidden:"N",sort:8,defult:"",slot:!0},{label:"尚未認証數",width:"",prop:"x_notyet",col:"x_notyet",parameter:"N",hidden:"N",sort:9,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},o={header:[{label:"學校代碼",width:"",prop:"sch_no",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"b",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"c",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"as_cls_name",col:"cls_id",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"as_std_no",col:"std_no",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"as_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"學習成果紀錄",width:"",prop:"x_1",col:"x_1",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"學習成果認證",width:"",prop:"x_2",col:"x_2",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1},{label:"學習成果勾選",width:"",prop:"x_3",col:"x_3",parameter:"N",hidden:"N",sort:8,defult:"",slot:!0},{label:"多元表現紀錄",width:"",prop:"x_4",col:"x_4",parameter:"N",hidden:"N",sort:9,defult:"",slot:!1},{label:"多元表現勾選",width:"",prop:"x_5",col:"x_5",parameter:"N",hidden:"N",sort:10,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},d={header:[{label:"學校代碼",width:"",prop:"sch_no",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"std_no",col:"std_no",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"std_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"學習成果勾選數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},i={header:[{label:"學校代碼",width:"",prop:"sch_no",col:"sch_no",parameter:"N",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"std_no",col:"std_no",parameter:"N",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"std_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"多元學習勾選數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0},n={LeftHeader:[{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"教師姓名",width:"",prop:"emp_name",col:"emp_name",parameter:"N",hidden:"N",sort:1,defult:"",slot:!1},{label:"教師代碼",width:"",prop:"emp_id",col:"emp_id",parameter:"Y",hidden:"Y",sort:0,defult:"",slot:!1},{label:"未認證數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:2,defult:"",slot:!1}],RightHeader:[{label:"學年",width:"50",prop:"year_id",col:"year_id",parameter:"Y",hidden:"N",sort:1,defult:"",slot:!1},{label:"學期",width:"50",prop:"sms_id",col:"sms_id",parameter:"Y",hidden:"N",sort:2,defult:"",slot:!1},{label:"班級",width:"",prop:"cls_abr",col:"cls_abr",parameter:"N",hidden:"N",sort:3,defult:"",slot:!1},{label:"學號",width:"",prop:"std_no",col:"std_no",parameter:"Y",hidden:"N",sort:4,defult:"",slot:!1},{label:"姓名",width:"",prop:"std_name",col:"std_name",parameter:"N",hidden:"N",sort:5,defult:"",slot:!1},{label:"科目",width:"",prop:"sub_name",col:"sub_name",parameter:"N",hidden:"N",sort:6,defult:"",slot:!1},{label:"待認證數量",width:"",prop:"x_cnt",col:"x_cnt",parameter:"N",hidden:"N",sort:7,defult:"",slot:!1}],delete_rule:{},save_rule:{},query_data:!1,delete_data:!1,upload_file:!0,download_file:!0,add_data:!1,checkbox:!0}}}]);